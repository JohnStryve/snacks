webpackJsonp([9],{435:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(65),r=n(1),l=n.n(r),u=n(165),p=(n.n(u),n(104)),d=n(163),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.loaded=function(e){l()("body").removeClass("inside"),this.getHomeData(),this.pressCar(),this.admin(),e()},t.prototype.admin=function(){var e=this;d.a.check(function(t){console.info("admin: ",t),t&&(e.createDropzones(),e.rightClick(),e.rightClick_press())})},t.prototype.pressCar=function(){var e=void 0,t=l()(".pressCar");p.a.subscribe("quotes").on("value",function(n){t.html(""),e=n.val(),console.log(e),l.a.each(e,function(e,n){var o='<div class="logo column is-3" data-ref="'+n.href+'" data-id="'+n.id+'" data-quote="'+n.quote+'"> <img class="logo-img" src="'+n.img+'"> </div>';t.append(o)})})},t.prototype.start_press_car=function(e){e.not(".slick-initialized").slick({slidesToShow:5,slidesToScroll:1,autoplay:!0,centerMode:!0,autoplaySpeed:3e3,focusOnSelect:!0,responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:3}}]}),e.on("afterChange",function(e,t,n){var o=t.$slides[n],i=l()(o).attr("data-quote"),a=l()(o).attr("data-ref");l()(".quote.d span").text(i),l()(".quote.d a").attr("href",a)})},t.prototype.rightClick_press=function(){var e=this,t="",n=void 0;l()(".press").bind("contextmenu",function(o){event.preventDefault(),l()('.contextMenu_press input[type="text"]').val(""),l()("ul.contextMenu_press").show().css({top:event.pageY+15,left:event.pageX+10});l()(this).data("zone");if(t=l()(o.target).hasClass("logo-img")){l()('.contextMenu_press input[type="submit"]').removeClass("blue-bg yellow-bg").addClass("green-bg").val("Update");var i=l()(o.target).closest(".logo");n=i.data("id"),e.populate_form(i),l()("input#id").show(),l()(".rmv").show()}else l()('.contextMenu_press input[type="submit"]').removeClass("green-bg blue-bg").addClass("blue-bg").val("Publish"),l()("input#id").hide(),l()(".rmv").hide()}),l()(document).click(function(){0==l()("ul.contextMenu_press").is(":hover")&&l()("ul.contextMenu_press").fadeOut("fast")}),l()("#pressForm").submit(function(n){n.preventDefault(),l()("ul.contextMenu_press").fadeOut("fast"),t?e.press_update(l()(this)):e.press_post(l()(this))}),l()(".rmv").click(function(){p.a.remove("quotes/"+n),l()(".rmv").hide(),l()('.contextMenu_press input[type="submit"]').removeClass("blue-bg green-bg").addClass("yellow-bg").val("Undo Delete")})},t.prototype.populate_form=function(e){var t=l()("#pressForm");t.find("#id").val(e.data("id")),t.find("#href").val(e.data("ref")),t.find("#quote").val(e.data("quote")),t.find("#img").val(e.find("img").attr("src"))},t.prototype.press_post=function(e){console.log("post");var t={img:e.find("#img").val(),quote:e.find("#quote").val(),href:e.find("#href").val()};p.a.post("quotes/",t)},t.prototype.press_update=function(e){console.log("update");var t={img:e.find("#img").val(),quote:e.find("#quote").val(),href:e.find("#href").val(),id:e.find("#id").val()};p.a.write("quotes/"+t.id,t),l()(".contextMenu_press input").val("")},t.prototype.getHomeData=function(){p.a.subscribe("home").on("value",function(e){var t=e.val();l()("[data-zone]").each(function(e,n){var o=l()(n).data("zone"),i=t[o].image||null,a=t[o].alt||null,s=t[o].path||null,r=l()(n).find("img"),u=l()(n).find("a");r.attr("src",i),r.attr("alt",a),u.attr("href",s)})})},t.prototype.createDropzones=function(){var e=this,t={url:"/file/post",maxFilesize:5,maxFiles:1,addRemoveLinks:!0,dictResponseError:"Server not Configured",acceptedFiles:".png,.jpg,.gif,.bmp,.jpeg",previewTemplate:l()(".prevv").html(),autoProcessQueue:!0,init:function(){var t=this,n=t.options.el,o=t.options.previewsContainer;t.options.addRemoveLinks=!0,t.options.dictRemoveFile="Delete",t.on("addedfile",function(e){null!=this.files[1]&&this.removeFile(this.files[0])}),t.on("sending",function(t){l()(".meter").show();var i=this;setTimeout(function(){l()(n).find(o+" img").attr("src",t.dataURL),l()(n).find(o).removeClass("hide"),l()(n).find(".button.save").click(function(){e.publish_img(t,n.replace("]","").replace("[","")),i.removeFile(i.files[0])})},1e3)})}};l()("[dz1]").dropzone(Object.assign({el:"[dz1]",previewsContainer:"[upload-preview-dz1]"},t)),l()("[dz2]").dropzone(Object.assign({el:"[dz2]",previewsContainer:"[upload-preview-dz2]"},t)),l()("[dz3]").dropzone(Object.assign({el:"[dz3]",previewsContainer:"[upload-preview-dz3]"},t)),l()("[dz5]").dropzone(Object.assign({el:"[dz5]",previewsContainer:"[upload-preview-dz5]"},t)),l()("[dz6]").dropzone(Object.assign({el:"[dz6]",previewsContainer:"[upload-preview-dz6]"},t)),l()("[dz7]").dropzone(Object.assign({el:"[dz7]",previewsContainer:"[upload-preview-dz7]"},t))},t.prototype.rightClick=function(){var e=this;l()("[data-zone]").bind("contextmenu",function(e){e.preventDefault(),l()("ul.contextMenu").show().css({top:e.pageY+15,left:e.pageX+10});var t=l()(this).data("zone"),n=l()(this).data("dims"),o=l()(this).find("img").attr("src"),i=l()(this).find("img").attr("alt"),a=l()(this).find("a").attr("href");l()("ul.contextMenu span.zone_id").html(t),l()("ul.contextMenu input.zone").val(t),l()("ul.contextMenu p.dims").html(n),l()("ul.contextMenu input.image").val(o),l()("ul.contextMenu input.alt").val(i),l()("ul.contextMenu input.path").val(a)}),l()(document).click(function(){0==l()("ul.contextMenu").is(":hover")&&l()("ul.contextMenu").fadeOut("fast")}),l()("#contextForm").submit(function(t){console.log(t),t.preventDefault(),l()("ul.contextMenu").fadeOut("fast"),e.contextSubmit(l()(this))})},t.prototype.contextSubmit=function(e){var t={zone:e.find('input[name="zone"]').val(),path:e.find('input[name="path"]').val(),image:e.find('input[name="image"]').val(),alt:e.find('input[name="alt"]').val()};console.log("data: ",t),p.a.write("home/"+t.zone,t),console.log("submit")},t.prototype.publish_img=function(e,t){console.log(" ==== saving ====> ",e),p.a.addImage("home",t,e)},t}(s.a);t.default=c}});